<!doctype html>
<html>
<head>
	<title>Dicemat - web dice roller</title>
	<meta name="description" content="A dice rolling app for d6, d10 and d20 games. Built-in chat support allows the results to be shared to the entire play group."/>

	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta content="width=device-width, height=device-height,
				   initial-scale=1,
				   maximum-scale=1,
				   minimum-scale=1,
				   user-scalable=no" name="viewport" />


    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://underscorejs.org/underscore-min.js"></script>
    <script src="http://backbonejs.org/backbone-min.js"></script>
    <script src="https://cdn.socket.io/socket.io-1.0.4.js"></script>
    <script src="assets/roller.js"></script>
    <link href="assets/style.css" rel="stylesheet" media="screen" type="text/css" />
</head>
<body id="roller">
  <aside id="options" class="offcanvas offcanvas-left">
    <h1>Settings</h1>
    <ul>
      <li><input type="button" id="exalted" value="Exalted"/><input type="button" id="wod" value="WoD"/><input type="button" id="dnd" value="D&D"/></li>
      <li>
        <input type="checkbox" id="total" name="total" title="Sum-up the total value of the roll (e.g. D&D damage)">
        <label for="total"  title="Sum-up the total value of the roll (e.g. D&D damage)">Total</label>
      </li>
      <li>
        <input type="checkbox" id="xhighest" name="xhighest" title="Only count this many dice, which are the highest results"/>
        <input type="text" id="nhighest" value="0" maxlength="3" size="2"/>
        <label for="xhighest" title="Only count this many dice, which are the highest results"> highest</label>
      </li>
      <li>
        <input type="checkbox" id="threshold" name="threshold" title='Ignore dice that roll lower than this amount, count the number of "successes" (White Wolf)'/>
        <label for="threshold" title='Ignore dice that roll lower than this amount, count the number of "successes" (White Wolf)'>Target</label>
        <input type="text" maxlength="2" size="2" value="7" id="targetNumber"/>
      </li>
      <li>
        <input type="checkbox" id="doubles" name="doubles" title='10s count twice'/>
        <label for="doubles" title='10s count twice'>Rule of 10</label>
      </li>
      <li>
        <input type="checkbox" id="rerolls" name="rerolls" title='Reroll dice that match or exceed this value'/>
        <label for="rerolls" title='Reroll dice that match or exceed this value'>X-again</label>
        <input type="text" maxlength="2" size="2" value="10" id="xagain"/>
      </li>
      <li><input type="button" value="Clear results" id="clear"/><input type="button" value="Show Hidden" id="show-hidden"/></li>
    </ul>
    <ul id="links">
      <li><a href="https://github.com/fataku/dicemat" title="Go to github page" target="_blank">view this project on github</a></li>
      <li><a href="https://github.com/fataku/dicemat/issues" class="error" title="Report and issue on GitHub" target="_blank">Report an issue</a></li>
    </ul>
  </aside>
<main id="roller">
	<section id="left">
		<form action="#" method="get" id="dicepool">
			<h1><input type="button" class="dicemat-ui" value="" id="settings"/>Dice</h1>
			<ul id="dice">
				<!--li id="namer"><input type="text" name="desc" placeholder="Display Name" id="desc"/></li-->
				<li class="d20"><label for="d4s">d4  </label><input type="number" min="0" max="999" id="d4s" class="diceInput" maxlength="3" size="4" value="0" /></li>
				<li class="d20"><label for="d6s">d6  </label><input type="number" min="0" max="999" id="d6s" class="diceInput" maxlength="3" size="4" value="0" /></li>
				<li class="d20"><label for="d8s">d8  </label><input type="number" min="0" max="999" id="d8s" class="diceInput" maxlength="3" size="4" value="0" /></li>
				<li class="d20"><label for="d10s">d10 </label><input type="number" min="0" max="999" id="d10s" class="diceInput" maxlength="3" size="4" value="0" /></li>
				<li class="d20"><label for="d12s">d12 </label><input type="number" min="0" max="999" id="d12s" class="diceInput" maxlength="3" size="4" value="0" /></li>
				<li class="d20"><label for="d20s">d20 </label><input type="number" min="0" max="999" id="d20s" class="diceInput" maxlength="3" size="4" value="0" /></li>
				<li class="d20"><label for="d100s">d100</label><input type="number" min="0" max="999" id="d100s" class="diceInput" maxlength="3" size="4" value="0" /></li>
				<li id="roller"><input type="submit" id="roll" value="Roll!"/></li>
			</ul>


		</form>
		<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top" id="donate">
			<p class="message">
				Help us keep this app running by buying us a coffee<br/>(it helps turn ideas into code)
			</p>
			<input type="hidden" name="cmd" value="_s-xclick">
			<input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----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-----END PKCS7-----
			">
			<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
			<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
		</form>
	</section>
	<section id="right">
		<ol id="guests">
			<li class="plus">+</li>
		</ol>
		<h1>Results</h1>
		<div id="viewport"><ul class="results" id="self" name="self"></ul></div>
	</section>
</main>
<ul id="notifications"></ul>


<p id="copy">&copy; Horizonforge 2013</p>
<script type="text/html" id="liTemplate">
	<%
	var successes = 0, total = 0;
	_.each(results, function(roll, key, list){
		var c = "";
		if(roll === 1)												{c = "bad";}
		if(roll === 20)												{c = "good";}
		if(rules.get("threshold") && roll>= rules.get("threshold"))	{c = "good"; successes++;}
		if(rules.get("doubles") && roll === 10)						{c += " double"; successes++;}
		if(rules.get("rerolls")>1 && roll>=rules.get("rerolls")) 	{c += " reroll";}
		if(key < rules.get("xhighest"))								{c += " highest";}

		if(rules.get("total") && (!rules.get("xhighest") || key < rules.get("xhighest"))){total += roll}

		%><span class="<%-c%>"><%-roll%></span><%-((key===list.length-1)?"":", ")%>
	<% }); %>

	<%if(rules.get("threshold")){%><span class="ps"> :: <%-successes%> successes</span><%}%>
	<%if(rules.get("total")){%><span class="ps"> :: <%-total%> total</span><%}%>
	<span class="close" title="<%-(!hidden)?"hide":"show"%>">x</span>
</script>
<script type="text/html" id="notificationTemplate">
	<h1><%=title%></h1>
	<p><%=content%></p>
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-44858641-1', 'horizonforge.com');
  ga('send', 'pageview');

</script>
</body>
</html>